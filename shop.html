<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Єдовідник</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap" rel="stylesheet">
</head>

<style>
  /* Your existing CSS styles */
</style>

<body class="search">
  <header>
    <div class="headnav">
      <nav>
        <ul class="leftnav">
            <li class="leftnavpos"> <a href="main.html">Головна</a></li>
            <li><a href="wishlist.html">Wishlist</a></li>
            <li><a href="compare.html">Порівняння</a></li>
            <li><a href="shop.html">Магазин</a></li>
            <li>Допомога</li>
            <li><a href="faq.html">FAQ</a></li>
        </ul>
        <ul class="rightnav">
            <li><img src="ukr.png" alt=""></li>
            <li><img src="eng.png" alt=""></li>
            <li><a href="usereditprofile.html"><img src="user.png" alt=""></a></li>
        </ul>
    </nav>
    </div>  </header>

    <div class="cities">
        <div class="city">
            <button type="button" onclick="centerMapOnCity('Львів')">Львів</button>
        </div>
        <div class="city">
            <button type="button" onclick="centerMapOnCity('Київ')">Київ</button>
        </div>
        <div class="city">
            <button type="button" onclick="centerMapOnCity('Дніпро')">Дніпро</button>
        </div>
        <div class="city">
            <button type="button" onclick="centerMapOnCity('Одеса')">Одеса</button>
        </div>
        <div class="city">
            <button type="button" onclick="centerMapOnCity('Миколаїв')">Миколаїв</button>
        </div>
        <div class="city">
            <button type="button" onclick="centerMapOnCity('Херсон')">Херсон</button>
        </div>
        <div class="city">
            <button type="button" onclick="centerMapOnCity('Івано-Франківськ')">І. Ф.</button>
        </div>
        <div class="city">
            <button type="button" onclick="centerMapOnCity('Тернопіль')">Тернопіль</button>
        </div>
        <div class="city">
            <button type="button" onclick="centerMapOnCity('Харків')">Харків</button>
        </div>   
    </div>
    

     
 
    

  <div class="mainshop">
    <div class="leftinfoshop">
      <div class="dropdown-menu">
        <select class="dropdownitem" name="name" id="id" onchange="centerMapOnCity(value)">
            <option value="Львів">Дніпро, Дніпропетровська область</option>
            <option value="Львів" >Запоріжжя, Запорізька область</option>
            <option value="3" >Київ, Київська область</option>
            <option value="4" >Кривий Ріг, Дніпропетровська область</option>
            <option value="5" >Львів, Львівська область</option>
            <option value="6" >Миколаїв, Миколаївська область</option>
            <option value="7">Одеса, Одеська область</option>
            <option value="8">Харків, Харківська область</option>
        </select>
      </div>

      <div class="checkboxes">
        <h2 class="subtitle">Мережі магазинів</h2>
        <form>
          <div class="checkboxesmenu">
            <input type="checkbox" id="textcheck5" name="storeCheckbox" value="Comfy"  checked>
            <label for="textcheck5"> Comfy</label><br>
          </div>
          <div class="checkboxesmenu">
            <input type="checkbox" id="textcheck6" name="storeCheckbox" value="Foxtrot" checked >
            <label for="textcheck6">Foxtrot</label><br>
          </div>
          <!-- Add more store chains -->
        </form>
      </div>
    </div>
    <div class="mapshop">
      <div id="map" style="height: 400px;"></div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script>
    var map = L.map('map').setView([49.8397, 24.0297], 12); // Default view

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

  

    var markers = [];
    var selectedCity = null; // Keep track of the selected city

    const storeChainColors = {
      "Comfy": "green",
      "Foxtrot": "red"
      // Add more store chains and colors as needed
    };

    function createMarkers() {
      markersData.forEach(function(markerData) {
        var marker = L.marker(markerData.latlng, {
          icon: L.icon({
            iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-${storeChainColors[markerData.name] || 'gray'}.png`,
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
          }),
          name:markerData.name
        }).addTo(map);

        marker.bindPopup(markerData.adress);
        markers.push(marker);
        
      });
    }

    function showMarkers() {
      markers.forEach(function(marker) {
        map.addLayer(marker);
      });
    }

    function hideMarkers() {
      markers.forEach(function(marker) {
        map.removeLayer(marker);
      });
    }

    var markersData = [
  { name: 'Comfy', latlng: { lat: 49.8122586, lng: 23.9775488 }, city: 'Львів' ,adress:"вулиця Івана Виговського, 100, Львів, Львівська область, 79000"},
  { name: 'Comfy', latlng: { lat: 49.8493254, lng: 24.0219017 }, city: 'Львів',adress:"вулиця Під Дубом, 7Б, Львів, Львівська область, 79000" },
  { name: 'Comfy', latlng: { lat: 49.87031589999999, lng: 24.022944 }, city: 'Львів',adress:"вулиця Гетьмана Мазепи, 1Б, Львів, Львівська область, 79000"  },
  { name: 'Foxtrot', latlng: { lat: 50.4501, lng: 30.5234 }, city: 'Київ',adress:"10, Heneral, Vorobyov St, Київ"  },
  { name: 'Foxtrot', latlng: { lat: 49.8435466, lng: 24.0229822 }, city: 'Львів' ,adress:"вулиця Городоцька, 16, Львів, Львівська область, 79000" },
  { name: 'Foxtrot', latlng: { lat: 49.8498827, lng: 24.0223092 }, city: 'Львів' ,adress:"вулиця Під Дубом, 7Б, Львів, Львівська область, 79000" },
  { name: 'Foxtrot', latlng: { lat: 49.8560791, lng: 24.0212206 }, city: 'Львів' ,adress:"проспект В'ячеслава Чорновола, 57, Львів, Львівська область, 79000" },
  { name: 'Foxtrot', latlng: { lat: 49.8141538, lng: 24.061762 }, city: 'Львів' ,adress:"вулиця Зелена, 147/1, Львів, Львівська область, 79000" },
  { name: 'Foxtrot', latlng: { lat: 49.8073364, lng: 23.9788109 }, city: 'Львів' ,adress:"вул. Кульпарківська, 226, Львів, Львівська область, 79000" },
  { name: 'Comfy', latlng: { lat: 49.8073364, lng: 23.9788109 }, city: 'Львів' ,adress:"вул. Кульпарківська, 226, Львів, Львівська область, 79000" },

  { name: 'Foxtrot', latlng: { lat: 49.8093341, lng: 23.9981256 }, city: 'Львів' ,adress:"Новий ЦУМ, вулиця Княгині Ольги, 106, Львів, Львівська область, 79000" },
  { name: 'Foxtrot', latlng: { lat: 49.7734874, lng: 24.0100473 }, city: 'Львів' ,adress:"вул. Стрийська, 30, Сокільники, Львівська область, 79011" },
  { name: 'Foxtrot', latlng: { lat: 49.7919607, lng: 24.0574058 }, city: 'Львів' ,adress:"проспект Червоної Калини, 62, Львів, Львівська область, 79000" },
  // Add more store data
];

function centerMapOnCity(cityName) {
  if (selectedCity !== cityName) {
    selectedCity = cityName;
    var cityCoordinates = {
        
        "Львів": {"lat": 49.8397, "lng": 24.0297},
        "Київ": {"lat": 50.4501, "lng": 30.5234},
        "Дніпро": {"lat": 48.4666, "lng": 35.0500},
        "Одеса": {"lat": 46.4667, "lng": 30.7167},
        "Миколаїв": {"lat": 46.6667, "lng": 32.0500},
        "Херсон": {"lat": 46.5167, "lng": 33.1333},
        "Івано-Франківськ": {"lat": 48.8667, "lng": 24.0667},
        "Тернопіль": {"lat": 49.5500, "lng": 25.5833},
        "Харків": {"lat": 50.3167, "lng": 36.2667},


      };

    var cityLat = cityCoordinates[cityName].lat;
    var cityLng = cityCoordinates[cityName].lng;

    

    map.setView([cityLat, cityLng], 12); // Set view to the city

    markers.forEach(function(marker) {
      if (marker.options.city === cityName) {
        map.addLayer(marker);
      }
    });
  }
}


    function updateMarkers() {
      var selectedStores = [];
      var storeCheckboxes = document.querySelectorAll('.checkboxesmenu input[name="storeCheckbox"]:checked');
      storeCheckboxes.forEach(function(checkbox) {
        selectedStores.push(checkbox.value);
      });

      hideMarkers();

      markers.forEach(function(marker) {
      if (selectedStores.includes(marker.options.name)) {
        map.addLayer(marker);
      }
    });
    }

    var checkboxes = document.querySelectorAll('.checkboxesmenu input[name="storeCheckbox"]');
    checkboxes.forEach(function(checkbox) {
      checkbox.addEventListener('change', updateMarkers);
    });

    createMarkers();
    showMarkers();
  </script>
</body>

</html>
